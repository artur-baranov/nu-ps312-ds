---
title: "Exploring Data"
subtitle: "Week 2"
date: 2025-04-10
format: 
  html:
    embed-resources: true
toc: true
---

# Before we start

-   No Thursday discussion section next week

-   But! Script will be published on the website. Go through it! Data classes will be discussed there!

# Quick Recap

## Substantive

-   What is a **Causal Relation**?

-   What is **Confounder**?

-   Independent Variable vs Dependent Variable?

-   Control Variable?

## Coding

-   What is a Chunk?

-   What is a CSV vs Excel?

# Agenda

-   Questions regarding Lab Assignment or the class?

-   Continuing to adapt to R and RStudio

-   Exploring Data

-   Keeping track of Missingness


# Markdown and Quarto

This whole website was built using R, Markdown and Quarto. Let's quickly overview these languages

In RStudio, you can use Markdown language to format text. 

For example, **this is bold text** and *this is italic text*. And, of course, you can insert images. It's pretty easy, and after the class you can take a look at some [tutorials](https://www.markdownguide.org/basic-syntax/).

![Northwestern Logo](https://www.northwestern.edu/brand/images/wordmark/wordmark-vert.jpg)

You can do many-many more different things. In this regard, visual editor in RStudio might be helpful. Markdown is also used in several note taking apps, e.g. [Obsidian](https://obsidian.md) or [Notion](https://www.notion.so). Feel free to utilize your Markdown knowledge for your studies.

Generally, what we've done so far can be described by the image below. We have used R ("engine") and RStudio ("car"). In Rstudio we have Quarto, which is this document you are working with right now. We can do a lot of things right away -- e.g., render our output to a Word document, PDF or HTML. 

![R software](https://artur-baranov.github.io/images/r_rstudio_quarto_output.png)



# Finding Data

Letâ€™s explore Comparative Political Dataset. It consists of political and institutional country-level data. Take a look on their [codebook](https://cpds-data.org/wp-content/uploads/2024/11/codebook_cpds.pdf).

Today we are working with the following variables.

-   `year` - year variable

-   `country` - country variable

-   `prefisc_gini` - Gini index. What is it?

-   `eu` - member states of the European Union identification

-   `openc` - Openness of the economy (trade as % of GDP)

-   `poco` -  post-communist countries post-communist countries identification


If you don't have `readxl` library installed, do it using `install.packages()`. Run it only once!

```{r}
library(readxl)

cpds = read_excel("data/cpds.xlsx")
```

Load the `tidyverse` library

```{r}
#| message: false

library(tidyverse)
```


# Exploring data

First of all, let's subset the variables we have outlined for the ease of working with data.

```{r}
cpds_subset = cpds %>%
  select(year, country, prefisc_gini, eu, openc, poco) 
```

How does the data look like? Using `head()` let's present first rows to get the sense

```{r}
head(cpds_subset)
```

Explore the distribution of Gini below. What can we observe?

```{r}
ggplot(cpds_subset) +
  geom_histogram(aes(x = prefisc_gini)) 
```

What is an average Gini coefficient? Pay attention to the `na.rm = TRUE` argument.

```{r}
mean(cpds_subset$prefisc_gini, na.rm = TRUE)
```
Let's include this information on the plot, customizing it in the meantime. Pay attention to `theme_bw()` and `labs()` functions. You can explore ggplot themes [here](https://ggplot2.tidyverse.org/reference/ggtheme.html).

```{r}
ggplot(cpds_subset) +
  geom_histogram(aes(x = prefisc_gini))  +
  geom_vline(xintercept = mean(cpds_subset$prefisc_gini, na.rm = TRUE), color = "red") +
  theme_bw() +
  labs(x = "Gini Coefficient",
       y = "Count",
       title = "Distribution of Gini Coefficient")
```

Let's explore the distribution by groups. For example, EU countries to non-EU countries. USe `eu` variable for this and `geom_boxplot()`. But wow! We didn't get the group comparison, any ideas why?

```{r}
ggplot(cpds_subset) +
  geom_boxplot(aes(y = prefisc_gini, x = eu)) 
```

Let's correct the class of variables. We'll discuss the classes more in a detail next week*. Fantastic! Are these groups different?

```{r}
cpds_subset %>%
  mutate(eu = as.factor(eu)) %>%
  ggplot() +
  geom_boxplot(aes(y = prefisc_gini, x = eu)) 
```

::: {.callout-tip icon="false"}
## Coding Task

Let's explore these variables:

-   `openc` - Openness of the economy (trade as % of GDP)

-   `poco` -  post-communist countries post-communist countries identification

They are already in `cpds_subset`. Draw a distribution of `openc` variable.

```{r}
#| eval: false

ggplot(...) +
  geom_histogram(aes(x = ...)) 
```

Add an average of `openc` to the plot using `geom_vline()`

```{r}
#| eval: false

ggplot(cpds_subset) +
  geom_histogram(...(x = ...)) +
  ...(xintercept = mean(cpds_subset$openc))
```




:::




Types of relationship:

- Descriptive

- Predictive

- Causal


# Exploring missing values

-   What are potential biases 

# Sampling Biases

# Some Tips

-   QoG and V-Dem were covered in the Lecture